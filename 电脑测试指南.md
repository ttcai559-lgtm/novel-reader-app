# 💻 电脑端测试指南

## 🚀 立即开始（3步）

### 第1步: 一键测试

**双击运行**: `TEST_NOW.bat`

这个脚本会：
- ✅ 自动安装依赖（如果需要）
- ✅ 测试TTS合成
- ✅ 生成测试音频
- ✅ 打开输出文件夹

**预期结果**:
- 文件: `data/output/test_demo.mp3`
- 内容: "你好，欢迎使用小说转有声读物工具"

---

### 第2步: 转换测试小说

**命令行方式**:
```cmd
# 打开命令提示符（CMD）
# 进入项目目录
cd D:\Python_file\APP_Tool

# 转换测试小说
python cli.py convert test_novel.txt --voice xiaoxiao

# 查看输出
dir data\output\test_novel
```

**预期输出**:
```
data/output/test_novel/
├── 001_00.mp3  (第一章 第1段)
├── 001_01.mp3  (第一章 第2段)
├── 002_00.mp3  (第二章 第1段)
├── 002_01.mp3  (第二章 第2段)
├── 003_00.mp3  (第三章 第1段)
└── 003_01.mp3  (第三章 第2段)
```

---

### 第3步: 播放音频

**方法1: Windows媒体播放器**
- 打开 `data\output` 文件夹
- 双击任意MP3文件播放

**方法2: 使用CLI播放**
```cmd
python cli.py play data/output/test_novel/001_00.mp3
```

**方法3: 倍速播放**
```cmd
# 1.5倍速
python cli.py play data/output/test_novel/001_00.mp3 --speed 1.5

# 2倍速
python cli.py play data/output/test_novel/001_00.mp3 --speed 2.0
```

---

## 🎨 测试不同音色

### 查看所有音色
```cmd
python cli.py voices
```

### 测试不同音色
```cmd
# 温柔女声（晓晓）
python cli.py test "这是温柔女声的测试" test_xiaoxiao.mp3 -v xiaoxiao

# 青年男声（云希）
python cli.py test "这是青年男声的测试" test_yunxi.mp3 -v yunxi

# 甜美女声（晓伊）
python cli.py test "这是甜美女声的测试" test_xiaoyi.mp3 -v xiaoyi

# 磁性男声（云扬）
python cli.py test "这是磁性男声的测试" test_yunyang.mp3 -v yunyang
```

---

## 📚 完整功能测试

### 测试1: 转换小说（不合并）
```cmd
python cli.py convert test_novel.txt --voice xiaoxiao

# 结果: 生成多个MP3文件（按章节段落）
```

### 测试2: 转换并合并
```cmd
python cli.py convert test_novel.txt --voice xiaoxiao --merge

# 结果: 生成单个完整的MP3文件
```

### 测试3: 自定义输出目录
```cmd
python cli.py convert test_novel.txt --voice xiaoxiao -o D:/我的有声书
```

### 测试4: 合并多个音频
```cmd
python cli.py merge data/output/test_novel/*.mp3 完整版.mp3
```

---

## 🎯 测试你自己的小说

### 1. 准备TXT文件
- 确保文件是纯文本格式
- 章节标题规范（如"第一章 XXX"）
- 推荐UTF-8编码（程序会自动检测）

### 2. 转换
```cmd
python cli.py convert "D:\你的小说.txt" --voice xiaoxiao --merge
```

### 3. 查看结果
```cmd
# 输出目录
dir data\output\你的小说\
```

---

## 🔍 故障排除

### 问题1: 提示"No module named 'edge_tts'"

**解决**:
```cmd
pip install edge-tts loguru PyYAML chardet click tqdm
```

### 问题2: 合成失败，网络错误

**原因**: Edge TTS需要联网

**解决**:
- 检查网络连接
- 如果使用代理，配置环境变量:
```cmd
set HTTP_PROXY=http://127.0.0.1:7890
set HTTPS_PROXY=http://127.0.0.1:7890
```

### 问题3: 中文乱码

**解决**:
```cmd
chcp 65001
python cli.py convert test_novel.txt
```

### 问题4: 找不到python命令

**解决**:
- 确保Python已添加到PATH
- 或使用完整路径:
```cmd
D:\Python_file\tool_project\venv\Scripts\python.exe cli.py convert test_novel.txt
```

---

## 📊 性能测试

### 测试转换速度
```cmd
# 测量时间
@echo off
set start=%time%
python cli.py convert test_novel.txt --voice xiaoxiao
set end=%time%
echo 开始: %start%
echo 结束: %end%
```

### 测试不同并发数
编辑 `config/user_config.yaml`:
```yaml
performance:
  max_workers: 8  # 改成不同的值测试
```

---

## 🎊 完整测试流程

### 5分钟快速测试
```cmd
# 1. 一键测试（1分钟）
TEST_NOW.bat

# 2. 转换测试小说（1分钟）
python cli.py convert test_novel.txt --voice xiaoxiao

# 3. 播放音频（听一下效果）
python cli.py play data/output/test_novel/001_00.mp3

# 4. 测试不同音色（2分钟）
python cli.py voices
python cli.py test "测试不同音色" test_voice.mp3 -v yunxi

# 5. 完整转换并合并（1分钟）
python cli.py convert test_novel.txt --voice xiaoxiao --merge
```

---

## 📱 对比：电脑版 vs 手机版

| 功能 | 电脑版 | 手机版(APK) |
|-----|-------|------------|
| TXT导入 | ✅ | ✅ |
| 多音色 | ✅ | ✅ |
| 倍速播放 | ✅ | ✅ |
| 音频播放 | ✅ | ✅ |
| 章节识别 | ✅ | ✅ |
| 命令行 | ✅ | ❌ |
| 图形界面 | ❌ | ✅ |
| 便携性 | 需要电脑 | 随时随地 |

---

## 💡 测试建议

### 1. 先测试短文本
```cmd
python cli.py test "你好世界" test.mp3 -v xiaoxiao
```

### 2. 再测试完整章节
```cmd
python cli.py convert test_novel.txt --voice xiaoxiao
```

### 3. 最后测试真实小说
```cmd
python cli.py convert "你的小说.txt" --voice xiaoxiao --merge
```

### 4. 对比不同音色
- 为同一段文字生成不同音色
- 选择最喜欢的

---

## 📞 测试完成后

### 如果一切正常 ✅
- 电脑版已经可以使用了！
- 想要手机版就继续打包APK
- 查看 `ANDROID_APP_READY.md`

### 如果遇到问题 ❌
- 查看上面的"故障排除"
- 或告诉我具体错误信息

---

## 🎯 立即开始

**最简单的测试**:

1. 双击 `TEST_NOW.bat`
2. 等待1-2分钟
3. 打开 `data\output` 文件夹
4. 播放 `test_demo.mp3`

**恭喜！如果能听到声音，说明一切正常！🎉**

---

**祝测试顺利！有任何问题随时告诉我！💻🎧**
